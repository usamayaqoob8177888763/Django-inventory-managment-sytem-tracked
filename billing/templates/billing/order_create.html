{% extends 'inventory/base.html' %}
{% block title %}Create Order{% endblock %}
{% block content %}
<h4 class="mb-3">Create Order</h4>
<form method="post">
  {% csrf_token %}
  <div class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Customer</label>
      <select name="customer" class="form-select" required>
        <option value="">-- Select --</option>
        {% for cust in customers %}
          <option value="{{ cust.id }}">{{ cust.name }}{% if cust.phone %} ({{ cust.phone }}){% endif %}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-2">
      <label class="form-label">Tax</label>
      <input type="number" step="0.01" name="tax" class="form-control" value="0">
    </div>
    <div class="col-md-2">
      <label class="form-label">Discount</label>
      <input type="number" step="0.01" name="discount" class="form-control" value="0">
    </div>
    <div class="col-md-2">
      <label class="form-label">Payment Status</label>
      <select name="payment_status" class="form-select">
        <option value="unpaid" selected>Unpaid</option>
        <option value="partial">Partial</option>
        <option value="paid">Paid</option>
      </select>
    </div>
  </div>

  <div class="card mt-3">
    <div class="card-header"><strong>Items</strong></div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table mb-0 align-middle">
          <thead class="table-light">
            <tr><th>Product</th><th>Price</th><th>Stock</th><th style="width:140px;">Quantity</th></tr>
          </thead>
          <tbody>
          {% for p in products %}
            <tr>
              <td>{{ p.name }}</td>
              <td>{{ p.price }}</td>
              <td>{{ p.quantity }}</td>
              <td>
                <input type="number" name="product_{{ p.id }}" class="form-control" min="0" max="{{ p.quantity }}" value="0">
              </td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="mt-3">
    <button class="btn btn-primary">Create Order</button>
    <a class="btn btn-secondary" href="{% url 'billing:order_list' %}">Cancel</a>
  </div>
</form>
{% endblock %}
