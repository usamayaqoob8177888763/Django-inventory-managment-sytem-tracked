{% extends 'inventory/base.html' %}
{% block title %}Invoice {{ order.invoice_number }}{% endblock %}
{% block content %}
<div class="card">
  <div class="card-header d-flex justify-content-between">
    <div>
      <h5 class="mb-0">Invoice</h5>
      <small># {{ order.invoice_number }}</small>
    </div>
    <div class="text-end">
      <div><strong>Date:</strong> {{ order.date|date:"d M Y" }}</div>
      <div><strong>Status:</strong> {{ order.payment_status|title }}</div>
    </div>
  </div>
  <div class="card-body">
    <div class="row mb-3">
      <div class="col">
        <h6 class="mb-1">Bill To</h6>
        <div>{{ order.customer.name }}</div>
        {% if order.customer.phone %}<div>{{ order.customer.phone }}</div>{% endif %}
        {% if order.customer.email %}<div>{{ order.customer.email }}</div>{% endif %}
        {% if order.customer.address %}<div>{{ order.customer.address }}</div>{% endif %}
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-bordered">
        <thead class="table-light">
          <tr><th>#</th><th>Product</th><th>Price</th><th>Qty</th><th>Total</th></tr>
        </thead>
        <tbody>
          {% for it in order.items.all %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ it.product.name }}</td>
            <td>{{ it.unit_price }}</td>
            <td>{{ it.quantity }}</td>
            <td>{{ it.line_total }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="text-end">
      <div>Subtotal: <strong>{{ order.subtotal }}</strong></div>
      <div>Tax: <strong>{{ order.tax }}</strong></div>
      <div>Discount: <strong>{{ order.discount }}</strong></div>
      <div class="h5 mt-2">Grand Total: <strong>{{ order.total }}</strong></div>
      <div>Paid: <strong>{{ order.amount_paid }}</strong></div>
      <div>Balance: <strong>{{ order.balance }}</strong></div>
    </div>
  </div>
</div>
{% endblock %}
